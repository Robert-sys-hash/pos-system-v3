âœ… Coupons blueprint OK
âœ… Podstawowe blueprinty zaÅ‚adowane
âœ… Podstawowe blueprinty zarejestrowane
âœ… Auth blueprint OK
âœ… Transactions blueprint OK
âœ… Shifts blueprint OK
âœ… Shifts Enhanced blueprint OK
âœ… Invoices blueprint OK
âœ… Admin blueprint OK
âœ… Manufacturers blueprint OK
âœ… Cenowki blueprint OK
âš ï¸ Nie moÅ¼na zaimportowaÄ‡ margin_service: No module named 'utils.margin_service'
âœ… Cenowki Advanced blueprint OK
âœ… Sales Invoices blueprint OK
âœ… Product Reports blueprint OK
âœ… Kasa/Bank blueprint OK
âœ… Locations blueprint OK
âœ… Purchase invoices blueprint OK
âŒ BÅ‚Ä…d warehouses blueprint: No module named 'utils.margin_service'
âœ… Zarejestrowano systemowÄ… czcionkÄ™ UTF-8: /System/Library/Fonts/Helvetica.ttc
âœ… Zarejestrowano rodzinÄ™ czcionek Helvetica
ğŸ”¤ DostÄ™pne czcionki: ['Symbol', 'SystemUTF8', 'ZapfDingbats']
âœ… Tabela custom_invoice_templates utworzona/sprawdzona
âœ… Custom Templates blueprint OK
âœ… Messenger blueprint OK
âœ… Rabaty blueprint OK
ğŸ” APP: PrÃ³bujÄ™ importowaÄ‡ api.margins...
ğŸ” MARGINS: Blueprint margins zostaÅ‚ zainicjowany! WERSJA 2024-12-02-20:05
ğŸ” MARGINS: Import MarginService udany
ğŸ” APP: Zaimportowano margins_bp: <Blueprint 'margins_new'>
ğŸ” APP: Blueprint name: margins_new
âœ… Margins blueprint OK
âœ… Orders blueprint OK
âœ… Warehouse operations blueprint OK
âœ… FIFO system blueprint OK
âœ… Location pricing blueprint OK
âœ… Announcements blueprint OK
âœ… Document Prefixes blueprint OK
âœ… Fiscal Printer blueprint OK
ğŸ—„ï¸  ÅšcieÅ¼ka do bazy danych: /Users/robson/Downloads/pos-system-v3/kupony.db
âœ… Baza danych znaleziona
ğŸ•˜ Uruchomiono scheduler automatycznych backupÃ³w (21:30 codziennie)
âœ… Scheduler automatycznych backupÃ³w uruchomiony
âœ… Scheduler automatycznych backupÃ³w uruchomiony
ğŸš€ Uruchamianie POS System V3 API na porcie 8000...
ğŸ“¡ CORS skonfigurowany dla React frontend
 * Serving Flask app 'app'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.112:8000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 11:44:18] "GET /api/products/inventory?location_id=5&limit=1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 11:44:29] "GET /api/products/inventory?location_id=1&limit=1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 11:44:35] "GET /api/products/inventory?limit=1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 11:44:47] "GET /api/products/inventory?location_id=5&limit=1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 16:05:28] "GET /api/warehouses/5/prices?limit=2 HTTP/1.1" 200 -
ğŸ” DEBUG inventory - uÅ¼ywam pos_magazyn, available_only: False, location_id: 5, warehouse_id: None
ğŸ” DEBUG dodajÄ™ filtr lokalizacji: 5
ğŸ” DEBUG SQL: 
        SELECT 
            p.id,
            p.nazwa as name,
            p.opis as description,
            p.kategoria as category,
            p.category_id,
            k.nazwa as category_name,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as price,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as price_net,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as cena_sprzedazy_netto,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as cena_sprzedazy_brutto,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as purchase_price,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as cena_zakupu_netto,
            COALESCE(p.cena_zakupu_brutto, p.cena_zakupu, 0) as cena_zakupu_brutto,
            p.ean as barcode,
            p.kod_produktu as product_code,
            COALESCE(p.stawka_vat, 23) as tax_rate,
            COALESCE(pm.stan_aktualny, 0) as stock_quantity,
            COALESCE(pm.stan_minimalny, 0) as min_stock_level,
            p.jednostka as unit,
            p.data_utworzenia as created_at,
            p.data_modyfikacji as updated_at
        FROM produkty p
        LEFT JOIN kategorie_produktow k ON p.category_id = k.id
        LEFT JOIN pos_magazyn pm ON p.id = pm.produkt_id
        WHERE 1=1
         AND pm.lokalizacja = ? ORDER BY COALESCE(pm.stan_aktualny, 0) DESC, p.nazwa ASC LIMIT ? OFFSET ?
ğŸ” DEBUG params: ['5', 1, 0]
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG znaleziono 1 produktÃ³w
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG inventory - uÅ¼ywam pos_magazyn, available_only: False, location_id: 1, warehouse_id: None
ğŸ” DEBUG dodajÄ™ filtr lokalizacji: 1
ğŸ” DEBUG SQL: 
        SELECT 
            p.id,
            p.nazwa as name,
            p.opis as description,
            p.kategoria as category,
            p.category_id,
            k.nazwa as category_name,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as price,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as price_net,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as cena_sprzedazy_netto,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as cena_sprzedazy_brutto,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as purchase_price,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as cena_zakupu_netto,
            COALESCE(p.cena_zakupu_brutto, p.cena_zakupu, 0) as cena_zakupu_brutto,
            p.ean as barcode,
            p.kod_produktu as product_code,
            COALESCE(p.stawka_vat, 23) as tax_rate,
            COALESCE(pm.stan_aktualny, 0) as stock_quantity,
            COALESCE(pm.stan_minimalny, 0) as min_stock_level,
            p.jednostka as unit,
            p.data_utworzenia as created_at,
            p.data_modyfikacji as updated_at
        FROM produkty p
        LEFT JOIN kategorie_produktow k ON p.category_id = k.id
        LEFT JOIN pos_magazyn pm ON p.id = pm.produkt_id
        WHERE 1=1
         AND pm.lokalizacja = ? ORDER BY COALESCE(pm.stan_aktualny, 0) DESC, p.nazwa ASC LIMIT ? OFFSET ?
ğŸ” DEBUG params: ['1', 1, 0]
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG znaleziono 1 produktÃ³w
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG inventory - uÅ¼ywam pos_magazyn, available_only: False, location_id: None, warehouse_id: None
ğŸ” DEBUG SQL: 
        SELECT 
            p.id,
            p.nazwa as name,
            p.opis as description,
            p.kategoria as category,
            p.category_id,
            k.nazwa as category_name,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as price,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as price_net,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as cena_sprzedazy_netto,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as cena_sprzedazy_brutto,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as purchase_price,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as cena_zakupu_netto,
            COALESCE(p.cena_zakupu_brutto, p.cena_zakupu, 0) as cena_zakupu_brutto,
            p.ean as barcode,
            p.kod_produktu as product_code,
            COALESCE(p.stawka_vat, 23) as tax_rate,
            COALESCE(pm.stan_aktualny, 0) as stock_quantity,
            COALESCE(pm.stan_minimalny, 0) as min_stock_level,
            p.jednostka as unit,
            p.data_utworzenia as created_at,
            p.data_modyfikacji as updated_at
        FROM produkty p
        LEFT JOIN kategorie_produktow k ON p.category_id = k.id
        LEFT JOIN pos_magazyn pm ON p.id = pm.produkt_id
        WHERE 1=1
         ORDER BY COALESCE(pm.stan_aktualny, 0) DESC, p.nazwa ASC LIMIT ? OFFSET ?
ğŸ” DEBUG params: [1, 0]
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG znaleziono 1 produktÃ³w
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG inventory - uÅ¼ywam pos_magazyn, available_only: False, location_id: 5, warehouse_id: None
ğŸ” DEBUG dodajÄ™ filtr lokalizacji: 5
ğŸ” DEBUG SQL: 
        SELECT 
            p.id,
            p.nazwa as name,
            p.opis as description,
            p.kategoria as category,
            p.category_id,
            k.nazwa as category_name,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as price,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as price_net,
            COALESCE(p.cena_sprzedazy_netto, p.cena / (1 + COALESCE(p.stawka_vat, 23)/100.0), 0) as cena_sprzedazy_netto,
            COALESCE(p.cena_sprzedazy_brutto, p.cena, 0) as cena_sprzedazy_brutto,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as purchase_price,
            COALESCE(p.cena_zakupu, p.cena_zakupu_netto, 0) as cena_zakupu_netto,
            COALESCE(p.cena_zakupu_brutto, p.cena_zakupu, 0) as cena_zakupu_brutto,
            p.ean as barcode,
            p.kod_produktu as product_code,
            COALESCE(p.stawka_vat, 23) as tax_rate,
            COALESCE(pm.stan_aktualny, 0) as stock_quantity,
            COALESCE(pm.stan_minimalny, 0) as min_stock_level,
            p.jednostka as unit,
            p.data_utworzenia as created_at,
            p.data_modyfikacji as updated_at
        FROM produkty p
        LEFT JOIN kategorie_produktow k ON p.category_id = k.id
        LEFT JOIN pos_magazyn pm ON p.id = pm.produkt_id
        WHERE 1=1
         AND pm.lokalizacja = ? ORDER BY COALESCE(pm.stan_aktualny, 0) DESC, p.nazwa ASC LIMIT ? OFFSET ?
ğŸ” DEBUG params: ['5', 1, 0]
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG znaleziono 1 produktÃ³w
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ”Œ ÅÄ…czÄ™ z bazÄ… danych: /Users/robson/Downloads/pos-system-v3/kupony.db
ğŸ” DEBUG: Starting products stats
ğŸ” DEBUG: Trying table produkty
ğŸ” DATABASE: Using database at: /Users/robson/Downloads/pos-system-v3/kupony.db
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 16:05:34] "GET /api/products/stats HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 16:06:07] "GET /api/warehouses/5/prices?limit=2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [03/Dec/2025 16:06:11] "GET /api/warehouses/5/prices?limit=1 HTTP/1.1" 200 -
